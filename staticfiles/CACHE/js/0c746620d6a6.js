var ajax=(function(){function getCSRFToken(){var csrfCookie=document.cookie.split(';')[0];var csrfTokenValue=csrfCookie.split('=')[1];return csrfTokenValue}
function send_ajax_request(destination_file,json_data,csrftoken,postAjaxFunction){var xmlhttp;if(window.XMLHttpRequest){xmlhttp=new XMLHttpRequest();}else{xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");}
xmlhttp.onreadystatechange=function(){if(xmlhttp.readyState==4&&xmlhttp.status==200){postAjaxFunction(xmlhttp.responseText);}};xmlhttp.open("POST",destination_file,true);xmlhttp.setRequestHeader("X-CSRFToken",csrftoken);xmlhttp.send(JSON.stringify(json_data));}
return{send_ajax_request:send_ajax_request,getCSRFToken:getCSRFToken};})();var documentModule=(function(){document.addEventListener('keydown',callKeypressFunctions);window.addEventListener('resize',callResizeFunctions);window.addEventListener('click',callClickFunctions);document.addEventListener('scroll',callScrollFunctions);var onKeyPressEvents=[];var onResizeEvents=[];var onClickEvents=[];var onScrollEvents=[];function callKeypressFunctions(event){for(var i=0;i<onKeyPressEvents.length;i++){(onKeyPressEvents[i])(event);}}
function callResizeFunctions(event){for(var i=0;i<onResizeEvents.length;i++){(onResizeEvents[i])(event);}}
function callClickFunctions(event){for(var i=0;i<onClickEvents.length;i++){(onClickEvents[i])(event);}}
function callScrollFunctions(event){for(var i=0;i<onScrollEvents.length;i++){(onScrollEvents[i])(event);}}
function addOnKeyPressFunction(func){onKeyPressEvents.push(func)}
function addOnResizeFunction(func){onResizeEvents.push(func)}
function addOnClickFunction(func){onClickEvents.push(func);}
function addOnScrollFunction(func){onScrollEvents.push(func);}
return{addOnKeyPressFunction:addOnKeyPressFunction,addOnResizeFunction:addOnResizeFunction,addOnClickFunction:addOnClickFunction,addOnScrollFunction:addOnScrollFunction};})();var websiteHeader=(function(){var headerElement=document.querySelector("div.header");var hamburgerIcon=headerElement.querySelector("div.hamburger-icon-wrapper");var desktopSearchBar=headerElement.querySelector("form.header-search-bar-with-icon");var searchIcon=headerElement.querySelector("img.search-icon");return{headerContainer:headerElement,categoriesIcon:hamburgerIcon,headerSearchBar:desktopSearchBar,mobileSearchIcon:searchIcon};})();var mobileSearchModal=(function(){var searchIcon=websiteHeader.mobileSearchIcon;var container=document.querySelector("div.mobile-modal-search-container");var backgroundOverlay=container.querySelector("div.mobile-search-background-overlay");var mainForm=container.querySelector("form.mobile-search-modal-form");var selectSearchType=container.querySelector("select.mobile-select-search-type");var searchBar=container.querySelector("input.mobile-modal-search-bar");var submitButton=container.querySelector("input.submit-mobile-search-modal");var cancelButton=container.querySelector("span.close-mobile-search-modal");var suggestionsList=container.querySelector("ul.mobile-search-suggestions-list");searchIcon.addEventListener('click',openSearchModal);cancelButton.addEventListener('click',closeSearchModal);searchBar.addEventListener('focus',displaySearchSuggestionsList);documentModule.addOnClickFunction(selectSuggestionsOrBlurEvent);searchBar.addEventListener('keyup',queryForSuggestions);selectSearchType.addEventListener('change',updateMainFormPOSTAddress);function updateMainFormPOSTAddress(event){if(this.value=="Food"||this.value=="Restaurant"){mainForm.action=event.currentTarget.getAttribute("data-regular-search-href");}
else{mainForm.action=event.currentTarget.getAttribute("data-internal-search-href");}}
function openSearchModal(event){container.style.display="block";searchBar.focus();}
function closeSearchModal(event){container.style.display="none";}
function displaySearchSuggestionsList(){suggestionsList.style.display="block";}
function selectSuggestionsOrBlurEvent(){var targetElement=event.target;if(targetElement.parentNode===suggestionsList){var suggestion_text=targetElement.innerHTML;searchBar.value=suggestion_text;mainForm.submit();}
else if(targetElement!==searchBar&&targetElement!==searchIcon){suggestionsList.style.display="none";}}
function queryForSuggestions(event){var searchType=selectSearchType.value;var searchQuery=searchBar.value;var csrfMiddlewareToken=ajax.getCSRFToken();var postAjaxFunction=function(result){suggestionsList.innerHTML=result;};var destinationFile=event.target.getAttribute("data-autocomplete-suggestions-href");var jsonData={"search-bar":searchQuery,"search-type":searchType};ajax.send_ajax_request(destinationFile,jsonData,csrfMiddlewareToken,postAjaxFunction);}
return{};})();var desktopHeaderSearch=(function(){var searchBarContainer=websiteHeader.headerSearchBar;var searchInput=searchBarContainer.querySelector("input.header-search-bar");var suggestionsList=searchBarContainer.querySelector("ul.header-search-suggestions-list");searchInput.addEventListener('focus',function(event){displaySearchSuggestionsList(event,suggestionsList);});documentModule.addOnClickFunction(function(event){selectSuggestionsOrBlurEvent(event,searchInput,searchBarContainer,suggestionsList);});searchInput.addEventListener('keyup',function(event){var destinationFile=event.target.getAttribute("data-autocomplete-suggestions-href");queryForSuggestions(event,searchInput,suggestionsList,destinationFile,'Restaurant');});function selectSuggestionsOrBlurEvent(event,searchInput,searchBarContainer,suggestionsList){var targetElement=event.target;if(targetElement.parentNode===suggestionsList){searchInput.value=targetElement.innerHTML;searchBarContainer.submit();}
else if(targetElement!==searchInput){suggestionsList.style.display="none";}}
function displaySearchSuggestionsList(event,suggestionsList){suggestionsList.style.display="block";}
function queryForSuggestions(event,searchInput,suggestionsList,destinationFile,searchType){var csrfMiddlewareToken=ajax.getCSRFToken();var json_data={"search-bar":searchInput.value,"search-type":searchType}
var postAjaxFunction=function(result){suggestionsList.innerHTML=result;}
ajax.send_ajax_request(destinationFile,json_data,csrfMiddlewareToken,postAjaxFunction);}
return{selectSuggestionsOrBlurEvent:selectSuggestionsOrBlurEvent,displaySearchSuggestionsList:displaySearchSuggestionsList,queryForSuggestions:queryForSuggestions};})();var moreOptions=(function(){var moreBoxPresent=document.querySelector("li.more-options-options")!=null;var backgroundImage=document.querySelector("div.header-background");var headerBar=document.querySelector("div.header");var categoryHeaderElements=document.querySelectorAll("h3.food-type-section-header");var categoryBar=document.querySelector("div.filter-and-search-section");var visibleOptionsUL=categoryBar.querySelector("ul.filter-options-list");var allVisibleOptionsLI=visibleOptionsUL.querySelectorAll("li.filter-option");var slidingUnderBar=visibleOptionsUL.querySelector("hr.sliding-underbar");var moreBox;var moreOptionsUL;var dropDownIcon;var hiddenOptions;if(moreBoxPresent){moreBox=visibleOptionsUL.querySelector("li.more-options-options");moreOptionsUL=moreBox.querySelector("ul.more-filter-options-list");dropDownIcon=moreBox.querySelector("i.more-options-drop-down-icon");hiddenOptions=moreBox.querySelectorAll("li.hidden-filter-option");}
var dropDownIsVisible=false;var dropDownMenuStates={true:"block",false:"none"};var dropDownIconStates={true:"rotate(180deg)",false:"rotate(0deg)"};var defaultCategoryBarPosition=getVerticalPosition(categoryBar);var currentCategoryName=categoryHeaderElements[0].textContent;var categoryBarFixed=false;var headerCategoryNamesToHeaderElements=getHeaderCategoryNamesToHeaderElements()
var barCategoryNamesToBarElements=getBarCategoryNamesToBarElements()
var headerCategoryExtraScrollDetectHeight=20;var headerCategoryScrollToPadding=10;var desktopWidth=800;adjustSlidingUnderBar(null,allVisibleOptionsLI[0])
if(moreBoxPresent){moreBox.addEventListener('click',toggleDropDownMenu);}
for(var i=0;i<allVisibleOptionsLI.length;i++){allVisibleOptionsLI[i].addEventListener('click',adjustSlidingUnderBar);allVisibleOptionsLI[i].addEventListener('click',scrollToCategory);}
if(moreBoxPresent){for(var i=0;i<hiddenOptions.length;i++){hiddenOptions[i].addEventListener('click',scrollToCategory);hiddenOptions[i].addEventListener('click',slideUnderBarToMoreBox);}
var hideDropDownCorrectly=documentModule.addOnClickFunction(toggleDropDownMenu);}
document.addEventListener("scroll",onScrollFunctions);function getHeaderCategoryNamesToHeaderElements(){var categoryNamesToHeaderElements;if(categoryNamesToHeaderElements==undefined){categoryNamesToHeaderElements={};for(var i=0;i<Object.keys(categoryHeaderElements).length;i++){categoryNamesToHeaderElements[categoryHeaderElements[i].textContent]=categoryHeaderElements[i];}}
return categoryNamesToHeaderElements;}
function getBarCategoryNamesToBarElements(){var visibleBarCategoryNameToVisibleBarCategoryElement;if(visibleBarCategoryNameToVisibleBarCategoryElement==undefined){visibleBarCategoryNameToVisibleBarCategoryElement={}
var visibleCategoryName;for(var i=0;i<Object.keys(allVisibleOptionsLI).length;i++){visibleCategoryName=allVisibleOptionsLI[i].firstElementChild.textContent;visibleBarCategoryNameToVisibleBarCategoryElement[visibleCategoryName]=allVisibleOptionsLI[i];}}
return visibleBarCategoryNameToVisibleBarCategoryElement;}
function getCategoryHeaderPositionsToCategoryNames(){var headerCategoryNamesToHeaderElements=getHeaderCategoryNamesToHeaderElements();var categoryHeaderPositionsToCategoryNames={};var element;var position;for(var categoryName in headerCategoryNamesToHeaderElements){if(headerCategoryNamesToHeaderElements.hasOwnProperty(categoryName)){element=headerCategoryNamesToHeaderElements[categoryName];position=getVerticalPosition(element);categoryHeaderPositionsToCategoryNames[position]=element.textContent;}}
return categoryHeaderPositionsToCategoryNames;}
function getSortedHeaderCategoryPositions(){var categoryPositions=Object.keys(getCategoryHeaderPositionsToCategoryNames());categoryPositions=categoryPositions.sort(function(a,b){return a-b;});return categoryPositions;}
function getHeaderHeight(){var headerHeight=window.getComputedStyle(headerBar).getPropertyValue("height");return parseFloat(headerHeight,10);}
function getCategoryBarHeight(){var categoryBarHeight=window.getComputedStyle(categoryBar).getPropertyValue("height");var borderTopHeight=window.getComputedStyle(categoryBar).getPropertyValue("border-top-width");var borderBottomHeight=window.getComputedStyle(categoryBar).getPropertyValue("border-bottom-width");categoryBarHeight=parseFloat(categoryBarHeight,10);borderBottomHeight=parseFloat(borderBottomHeight,10);borderTopHeight=parseFloat(borderTopHeight,10);return categoryBarHeight+borderBottomHeight+borderTopHeight;}
function getVerticalPosition(element){var elementRect=element.getBoundingClientRect();var bodyRect=document.body.getBoundingClientRect();var offset=elementRect.top-bodyRect.top;return offset;}
function getCategoryNameFromPosition(position){var categoryHeaderPositionsToCategoryNames=getCategoryHeaderPositionsToCategoryNames();var sortedPositionsList=getSortedHeaderCategoryPositions();var categoryName;var currentPosition=sortedPositionsList[0];for(var i=0;i<sortedPositionsList.length;i++){if(position>=sortedPositionsList[i]){currentPosition=sortedPositionsList[i];}}
categoryName=categoryHeaderPositionsToCategoryNames[currentPosition];return categoryName;}
function toggleDropDownMenu(event){event.stopPropagation();var target=event.currentTarget;if(target!=moreBox){dropDownIsVisible=false;}else{dropDownIsVisible=!dropDownIsVisible;}
moreOptionsUL.style.display=dropDownMenuStates[dropDownIsVisible];dropDownIcon.style.transform=dropDownIconStates[dropDownIsVisible];dropDownIcon.style.webkitTransform=dropDownIconStates[dropDownIsVisible];dropDownIcon.style.mozTransform=dropDownIconStates[dropDownIsVisible];}
function adjustSlidingUnderBar(event,element){categoryBar.style.display="block";var referenceX=visibleOptionsUL.getBoundingClientRect().left;var optionRect=(element||this).getBoundingClientRect();categoryBar.style.display="";var deltaX=optionRect.left-referenceX;var width=optionRect.width;slidingUnderBar.style.width=width+"px";slidingUnderBar.style.marginLeft=deltaX+"px";}
function slideUnderBarToMoreBox(event){adjustSlidingUnderBar(null,moreBox);}
function fixCategoryBar(){if(backgroundImage.getBoundingClientRect().bottom<=getHeaderHeight()&&!categoryBarFixed){categoryBar.classList.add("fix-filter-search");document.body.classList.add("fix-filter-search");categoryBarFixed=true;}else if(backgroundImage.getBoundingClientRect().bottom>=getHeaderHeight()+getCategoryBarHeight()&&categoryBarFixed){categoryBar.classList.remove("fix-filter-search");document.body.classList.remove("fix-filter-search");categoryBarFixed=false;}}
function smoothScroll(element,duration){function getEndPosition(){var endPosition=getVerticalPosition(element)-getHeaderHeight()-headerCategoryScrollToPadding;if(window.innerWidth>=desktopWidth){endPosition-=getCategoryBarHeight();}
return endPosition;}
var endPosition=getEndPosition();window.scrollTo(0,endPosition);}
function scrollToCategory(event){var srcElement=event.currentTarget;var categoryName=srcElement.getAttribute("data-category-name");var elementToScrollTo=headerCategoryNamesToHeaderElements[categoryName];smoothScroll(elementToScrollTo,300);}
function detectCategoryScroll(){var currentTopViewPosition=window.scrollY+getHeaderHeight()+getCategoryBarHeight();var barCategoryNamesToBarElements=getBarCategoryNamesToBarElements();var barCategoryNames=Object.keys(barCategoryNamesToBarElements);var barCategoryElement;var newCategoryName=getCategoryNameFromPosition(currentTopViewPosition+headerCategoryExtraScrollDetectHeight);if(newCategoryName!=currentCategoryName){currentCategoryName=newCategoryName;var categoryIndex=barCategoryNames.indexOf(newCategoryName);if(categoryIndex>-1){barCategoryElement=barCategoryNamesToBarElements[newCategoryName];adjustSlidingUnderBar(null,barCategoryElement);}
else if(moreBoxPresent){adjustSlidingUnderBar(null,moreBox);}
mobileCategoriesMenu.changeHighlightedMenuCategory(newCategoryName);}}
function onScrollFunctions(event){fixCategoryBar();detectCategoryScroll();}
var searchBarContainer=categoryBar.querySelector("form.current-page-search-wrapper");var searchInput=searchBarContainer.querySelector("input.current-page-search-bar");var selectSearchType=searchBarContainer.querySelector("select.select-search-type");var suggestionsList=searchBarContainer.querySelector("ul.filter-search-suggestions-list");searchInput.addEventListener('focus',function(event){desktopHeaderSearch.displaySearchSuggestionsList(event,suggestionsList);});searchInput.addEventListener('keyup',function(event){var destinationFile=event.target.getAttribute("data-autocomplete-suggestions-href");var searchType=selectSearchType.value;desktopHeaderSearch.queryForSuggestions(event,searchInput,suggestionsList,destinationFile,searchType);});documentModule.addOnClickFunction(function(event){desktopHeaderSearch.selectSuggestionsOrBlurEvent(event,searchInput,searchBarContainer,suggestionsList);});return{scrollToCategory:scrollToCategory};})();var mobileCategoriesMenu=(function(){var categoriesMenuUL=document.querySelector("ul.mobile-categories-menu-list");var listOfCategoryOptions=categoriesMenuUL.querySelectorAll("li.categories-menu-category-option");var hamburgerIcon=websiteHeader.categoriesIcon;hamburgerIcon.addEventListener('click',toggleMobileCategoryOptions);for(var i=0;i<listOfCategoryOptions.length;i++){listOfCategoryOptions[i].addEventListener('click',goToMenuCategory);}
var displayIsVisible=false;var categoriesMenuDisplayStates={true:"show-mobile-category-menu",false:"hide-mobile-category-menu"}
function changeHighlightedMenuCategory(categoryName){var currentCategoryLI=categoriesMenuUL.querySelector("li.current-category");currentCategoryLI.classList.remove("current-category");if(categoryName!=undefined){categoriesMenuUL.querySelector("li.categories-menu-category-option[data-category-name='"+categoryName+"']").classList.add("current-category");}
else{listOfCategoryOptions[0].classList.add("current-category");}}
function goToMenuCategory(event){toggleMobileCategoryOptions(event);moreOptions.scrollToCategory(event);var target=event.target;while(target.tagName!="LI"){target=target.parentNode;}
var categoryName=target.getAttribute("data-category-name");changeHighlightedMenuCategory(categoryName);}
function toggleMobileCategoryOptions(event){categoriesMenuUL.classList.remove(categoriesMenuDisplayStates[displayIsVisible])
displayIsVisible=!displayIsVisible;categoriesMenuUL.classList.add(categoriesMenuDisplayStates[displayIsVisible])}
return{changeHighlightedMenuCategory:changeHighlightedMenuCategory};})();var swipeGesture=(function(){function _swipeGestureData(dragCallback){this.swipeDirection;this.startX;this.startY;this.deltaX;this.deltaY;}
function _beginSwipeGesture(event,data,dragHandler){var touchPoint=event.changedTouches[0];data.swipeDirection='none';data.deltaX=0;data.deltaY=0;data.startX=touchPoint.pageX;data.startY=touchPoint.pageY;dragHandler(data.direction,data.deltaX,data.deltaY);event.preventDefault();}
function _duringSwipeGesture(event,data,dragHandler){var touchPoint=event.changedTouches[0];data.deltaX=touchPoint.pageX-data.startX;data.deltaY=touchPoint.pageY-data.startY;if(Math.abs(data.deltaX)>=Math.abs(data.deltaY)){data.swipeDirection=(data.deltaX<=0)?'left':'right';}
else{data.swipeDirection=(data.deltaY<=0)?'up':'down';}
dragHandler(data.swipeDirection,data.deltaX,data.deltaY);event.preventDefault();}
function _endSwipeGesture(event,data,swipeCallback){swipeCallback(data.swipeDirection,data.deltaX,data.deltaY);event.preventDefault();}
function addSwipeListener(element,swipeCallback){var noDragHandler=function(deltaX,deltaY){}
addSwipeAndDragListener(element,noDragHandler,swipeCallback);}
function addSwipeAndDragListener(element,dragHandler,swipeCallback){var data=new _swipeGestureData();element.addEventListener('touchstart',function(event){_beginSwipeGesture(event,data,dragHandler);});element.addEventListener('touchmove',function(event){_duringSwipeGesture(event,data,dragHandler);});element.addEventListener('touchend',function(event){_endSwipeGesture(event,data,swipeCallback);});}
return{addSwipeListener:addSwipeListener,addSwipeAndDragListener:addSwipeAndDragListener};})();var foodFavoriting=(function(){var dictOfFavoriteFoods=fetchOrInitializeFavoriteFoodsDict();var setFoodInterestForLoadedFoods=setInterestDataForFoodList();function saveNewFoodInterest(foodElement,newFoodInterest){var foodIdentifier=foodElement.getAttribute("data-food-unique-id");dictOfFavoriteFoods[foodIdentifier]=newFoodInterest;localStorage.setItem("dictOfFavoriteFoods",JSON.stringify(dictOfFavoriteFoods));}
function fetchOrInitializeFavoriteFoodsDict(){if(localStorage.getItem("dictOfFavoriteFoods")!==null){return JSON.parse(localStorage.getItem("dictOfFavoriteFoods"));}
localStorage.setItem("dictOfFavoriteFoods",JSON.stringify({}));return{};}
function setInterestDataForFoodList(){var listOfAllFoodEntries=document.querySelectorAll("li.food-entry-li");for(var i=0;i<listOfAllFoodEntries.length;i++){var foodElement=listOfAllFoodEntries[i];var foodID=foodElement.getAttribute("data-food-unique-id");if(dictOfFavoriteFoods[foodID]!==undefined){foodElement.setAttribute("data-food-is-liked",dictOfFavoriteFoods[foodID]);}}}
return{saveNewFoodInterest:saveNewFoodInterest,setInterestDataForFoodList:setInterestDataForFoodList};})();var foodEntry=(function(){var listOfFoodEntryLI;var MAX_NUMBER_OF_SCROLL_LISTENERS=4;var scrollListenersCount=0;var bufferCutOffDepth=window.innerHeight+500;var intializeFoodEntries=bindAllFoodEntriesWithClickEvent();function loadActualImageForFoodEntry(foodEntry){var actualSrc=foodEntry.getAttribute("data-food-image-location");var foodEntryImage=foodEntry.querySelector("img");var tempImage=new Image();tempImage.onload=function(event){foodEntryImage.src=this.src;foodEntry.classList.remove("unloaded-image");}
tempImage.src=actualSrc;}
function displayInspectorViewForFood(event){allInspectorView.showInspectorView(this);}
function loadFoodsAboveBufferCutoff(){var foodsToLoad=document.querySelectorAll("li.unloaded-image");for(var i=0;i<foodsToLoad.length;i++){var verticalImageOffset=foodsToLoad[i].getBoundingClientRect().top;if(verticalImageOffset<bufferCutOffDepth){loadActualImageForFoodEntry(foodsToLoad[i]);}}}
function getNextFoodItem(foodItem){var currentFoodIndex=foodItem.getAttribute("data-list-item-number");var nextFoodIndex=++currentFoodIndex;if(nextFoodIndex==listOfFoodEntryLI.length){return listOfFoodEntryLI[0];}
return listOfFoodEntryLI[nextFoodIndex];}
function getPreviousFoodItem(foodItem){var currentFoodIndex=foodItem.getAttribute("data-list-item-number");var previousFoodIndex=--currentFoodIndex;if(previousFoodIndex==-1){return listOfFoodEntryLI[listOfFoodEntryLI.length-1];}
return listOfFoodEntryLI[previousFoodIndex];}
function bindAllFoodEntriesWithClickEvent(){listOfFoodEntryLI=document.querySelectorAll("li.food-entry-li");for(var i=0;i<listOfFoodEntryLI.length;i++){var foodEntryElement=listOfFoodEntryLI[i];foodEntryElement.addEventListener('click',displayInspectorViewForFood);foodEntryElement.setAttribute("data-list-item-number",i);}
document.removeEventListener('scroll',loadFoodsAboveBufferCutoff);document.addEventListener('scroll',loadFoodsAboveBufferCutoff);loadFoodsAboveBufferCutoff();return listOfFoodEntryLI;}
return{"getNextFoodItem":getNextFoodItem,"getPreviousFoodItem":getPreviousFoodItem,bindAllFoodEntriesWithClickEvent:bindAllFoodEntriesWithClickEvent};})();var allInspectorView=(function(){var allInspectorsWrapper=document.querySelector("div.all-inspector-views-wrapper");var interestActionSign=allInspectorsWrapper.querySelector("div.interest-action-positioner");var mobileBackgroundOverlay=allInspectorsWrapper.querySelector("div.mobile-inspector-background-overlay");var desktopBackgroundOverlay=allInspectorsWrapper.querySelector("div.desktop-inspector-background-overlay");mobileBackgroundOverlay.addEventListener('click',hideInspectorView);desktopBackgroundOverlay.addEventListener('click',hideInspectorView);var currentFood;var foodInterestStates={true:"like-food",false:"not-like-food"};var inspectorIsOpen=false;var onKeyPress=keyPressFunction();function _displayInterestActionSign(foodIsLiked){var interestMessageDict={true:"Item saved to \"Favorites\".",false:"Item removed from \"Favorites\"."}
var oldOne=interestActionSign;interestActionSign=oldOne.cloneNode(true);var interestActionMessage=interestActionSign.querySelector("p.interest-action-taken");interestActionMessage.innerHTML=interestMessageDict[foodIsLiked];oldOne.parentNode.replaceChild(interestActionSign,oldOne);interestActionSign.style.display="block";}
function keyPressFunction(){var ESCAPE_KEY_CODE=27;var RIGHT_ARROW_KEY_CODE=39;var LEFT_ARROW_KEY_CODE=37;documentModule.addOnKeyPressFunction(function(event){if(inspectorIsOpen){if(event.keyCode==ESCAPE_KEY_CODE){hideInspectorView(event);}
else if(event.keyCode==RIGHT_ARROW_KEY_CODE){showNextFood();}
else if(event.keyCode==LEFT_ARROW_KEY_CODE){showPreviousFood();}}});}
function showInspectorView(clickedFood){mobileInspectorView.initializeMobileViewWithFood(clickedFood);desktopInspectorView.initializeDesktopViewWithFood(clickedFood);currentFood=clickedFood;inspectorIsOpen=true;interestActionSign.style.display="none";allInspectorsWrapper.style.display="block";}
function hideInspectorView(event){allInspectorsWrapper.style.display="none";inspectorIsOpen=false;}
function showNextFood(event){var nextFood=foodEntry.getNextFoodItem(currentFood);showInspectorView(nextFood);}
function showPreviousFood(event){var previousFood=foodEntry.getPreviousFoodItem(currentFood);showInspectorView(previousFood);}
function toggleInterestInFood(event){var newInterestInFood=!(currentFood.getAttribute("data-food-is-liked")=="true");currentFood.setAttribute("data-food-is-liked",newInterestInFood);setInterestIconBasedOnCurrentInterest(desktopInspectorView.interestIcon,currentFood);setInterestIconBasedOnCurrentInterest(mobileInspectorView.interestIcon,currentFood);foodFavoriting.saveNewFoodInterest(currentFood,newInterestInFood);_displayInterestActionSign(newInterestInFood);}
function setInterestIconBasedOnCurrentInterest(interestIcon,foodElement){var interestInFood=foodElement.getAttribute("data-food-is-liked")=="true";interestIcon.className=interestIcon.className.replace(" "+foodInterestStates[!interestInFood]," "+foodInterestStates[interestInFood]);}
return{showInspectorView:showInspectorView,hideInspectorView:hideInspectorView,showNextFood:showNextFood,showPreviousFood:showPreviousFood,toggleInterestInFood:toggleInterestInFood,setInterestIconBasedOnCurrentInterest:setInterestIconBasedOnCurrentInterest};})();var mobileInspectorView=(function(){var listOfMobileInspectors=document.querySelector("ul.list-of-mobile-inspectors");var mobileInspector=listOfMobileInspectors.querySelector("li.mobile-inspector-view-wrapper");var leftInspectorView=mobileInspector.cloneNode(true);var rightInspectorView=mobileInspector.cloneNode(true);var rightMobilePictureIcon=mobileInspector.querySelector("span.right-arrow");var leftMobilePictureIcon=mobileInspector.querySelector("span.left-arrow");var mobileInterestIcon=mobileInspector.querySelector("span.interested-in-food-icon");var mobileFoodImage=mobileInspector.querySelector("img.food-image");var exitMobileInspectorIcon=mobileInspector.querySelector("span.close-inspector-icon");var restaurantLinkIcon=mobileInspector.querySelector("a.restaurant-page-link");swipeGesture.addSwipeAndDragListener(mobileFoodImage,_whileDraggingImage,_onDragEnd);rightMobilePictureIcon.addEventListener('click',allInspectorView.showNextFood);leftMobilePictureIcon.addEventListener('click',allInspectorView.showPreviousFood);mobileInterestIcon.addEventListener('click',allInspectorView.toggleInterestInFood);exitMobileInspectorIcon.addEventListener('click',allInspectorView.hideInspectorView);var RIGHT_POSITION=0;var CENTER_POSITION=-1*window.innerWidth;var LEFT_POSITION=-2*window.innerWidth;var previousFood;var centerFood;var nextFood;var initializeInspectorViewList=_addLeftAndRightInspectorView();var intializeInspectorViewDimensions=_changeInspectorViewDimensionsOnResize();var enableInspectorViewResize=documentModule.addOnResizeFunction(_changeInspectorViewDimensionsOnResize);function _changeInspectorViewDimensionsOnResize(event){listOfMobileInspectors.style.width=3*window.innerWidth+"px";listOfMobileInspectors.style.webkitTransform="translate3d(-"+window.innerWidth+"px,0px,0px)";listOfMobileInspectors.style.mozTransform="translate3d(-"+window.innerWidth+"px,0px,0px)";listOfMobileInspectors.style.transform="translate3d(-"+window.innerWidth+"px,0px,0px)";leftInspectorView.style.width=window.innerWidth+"px";mobileInspector.style.width=window.innerWidth+"px";rightInspectorView.style.width=window.innerWidth+"px";RIGHT_POSITION=0;CENTER_POSITION=-1*window.innerWidth;LEFT_POSITION=-2*window.innerWidth;}
function _addLeftAndRightInspectorView(){listOfMobileInspectors.insertBefore(leftInspectorView,mobileInspector);listOfMobileInspectors.appendChild(rightInspectorView);}
function _whileDraggingImage(direction,deltaX,deltaY){listOfMobileInspectors.style.webkitTransform="translate3d("+(-1*(window.innerWidth-deltaX))+"px,0px,0px)";listOfMobileInspectors.style.mozTransform="translate3d("+(-1*(window.innerWidth-deltaX))+"px,0px,0px)";listOfMobileInspectors.style.transform="translate3d("+(-1*(window.innerWidth-deltaX))+"px,0px,0px)";}
function _onDragEnd(direction,deltaX,deltaY){var MIN_SWIPE_DISTANCE=window.innerWidth*0.4;if(direction=='left'&&Math.abs(deltaX)>MIN_SWIPE_DISTANCE){listOfMobileInspectors.style.webkitTransform="translate3d("+LEFT_POSITION+"px,0px,0px)";listOfMobileInspectors.style.mozTransform="translate3d("+LEFT_POSITION+"px,0px,0px)";listOfMobileInspectors.style.transform="translate3d("+LEFT_POSITION+"px,0px,0px)";allInspectorView.showNextFood(null);}
else if(direction=='right'&&Math.abs(deltaX)>MIN_SWIPE_DISTANCE){listOfMobileInspectors.style.webkitTransform="translate3d("+RIGHT_POSITION+"px,0px,0px)";listOfMobileInspectors.style.mozTransform="translate3d("+RIGHT_POSITION+"px,0px,0px)";listOfMobileInspectors.style.transform="translate3d("+RIGHT_POSITION+"px,0px,0px)";allInspectorView.showPreviousFood(null);}
else{listOfMobileInspectors.style.mozTransform="translate3d("+CENTER_POSITION+"px,0px,0px)";listOfMobileInspectors.style.webkitTransform="translate3d("+CENTER_POSITION+"px,0px,0px)";listOfMobileInspectors.style.transform="translate3d("+CENTER_POSITION+"px,0px,0px)";}}
function _populateMobileViewWithFoodData(mobileView,foodElement){var foodNameElement=mobileView.querySelector("h3.food-name");var foodDetailsElement=mobileView.querySelector("p.food-description");var foodImageElement=mobileView.querySelector("img.food-image");var foodPriceElement=mobileView.querySelector("p.food-price");var categoryNameElement=mobileView.querySelector("h4.food-category-name");var categoryDescriptionElement=mobileView.querySelector("p.food-category-description");var restaurantHeaderLinkElement=mobileView.querySelector("h2.inspector.restaurant-name a");var foodName=foodElement.getAttribute("data-food-name");foodNameElement.innerHTML=foodName;foodImageElement.alt=foodName;var foodDetails=foodElement.getAttribute("data-food-details");foodDetailsElement.innerHTML=foodDetails;var foodImageLocation=foodElement.getAttribute("data-food-image-location");foodImageElement.src=foodImageLocation;var foodPrice=foodElement.getAttribute("data-food-price");foodPriceElement.innerHTML=foodPrice;var categoryName=foodElement.getAttribute("data-category-name");categoryNameElement.innerHTML=categoryName;var categoryDescription=foodElement.getAttribute("data-category-description");categoryDescriptionElement.innerHTML=categoryDescription;var restaurantName=foodElement.getAttribute("data-restaurant-name");restaurantHeaderLinkElement.innerHTML=restaurantName;var restaurantLink=foodElement.getAttribute("data-restaurant-link");restaurantHeaderLinkElement.href=restaurantLink;restaurantLinkIcon.href=restaurantLink;var interestIconForView=mobileView.querySelector("span.inspector.interested-in-food-icon");allInspectorView.setInterestIconBasedOnCurrentInterest(interestIconForView,foodElement);}
function initializeMobileViewWithFood(foodElement){previousFood=foodEntry.getPreviousFoodItem(foodElement);centerFood=foodElement;nextFood=foodEntry.getNextFoodItem(foodElement);listOfMobileInspectors.style.webkitTransform="translate3d("+CENTER_POSITION+"px,0px,0px)";listOfMobileInspectors.style.mozTransform="translate3d("+CENTER_POSITION+"px,0px,0px)";listOfMobileInspectors.style.transform="translate3d("+CENTER_POSITION+"px,0px,0px)";_populateMobileViewWithFoodData(leftInspectorView,previousFood);_populateMobileViewWithFoodData(mobileInspector,centerFood);_populateMobileViewWithFoodData(rightInspectorView,nextFood);}
return{interestIcon:mobileInterestIcon,initializeMobileViewWithFood:initializeMobileViewWithFood};})();var desktopInspectorView=(function(){var desktopInspector=document.querySelector("div.food-modal-container");var rightDesktopPictureIcon=desktopInspector.querySelector("span.food-modal-right-arrow-icon");var leftDesktopPictureIcon=desktopInspector.querySelector("span.food-modal-left-arrow-icon");var desktopInterestIcon=desktopInspector.querySelector("span.food-interest-icon");var exitDesktopInspectorIcon=desktopInspector.querySelector("span.exit-food-modal-icon");var foodImageElement=desktopInspector.querySelector("img.food-modal-image");var restaurantHeaderLinkElement=desktopInspector.querySelector("h3.food-modal-restaurant-name a");var foodNameElement=desktopInspector.querySelector("h1.food-modal-food-name");var foodDetailsElement=desktopInspector.querySelector("p.food-modal-food-description");var categoryNameElement=desktopInspector.querySelector("h5.food-modal-category-name");var categoryDescriptionElement=desktopInspector.querySelector("p.food-modal-category-details");var foodPriceElement=desktopInspector.querySelector("span.food-modal-food-price");rightDesktopPictureIcon.addEventListener('click',allInspectorView.showNextFood);leftDesktopPictureIcon.addEventListener('click',allInspectorView.showPreviousFood);desktopInterestIcon.addEventListener('click',allInspectorView.toggleInterestInFood);exitDesktopInspectorIcon.addEventListener('click',allInspectorView.hideInspectorView);function initializeDesktopViewWithFood(foodElement){var foodName=foodElement.getAttribute("data-food-name");foodNameElement.innerHTML=foodName;foodImageElement.alt=foodName;var foodDetails=foodElement.getAttribute("data-food-details");foodDetailsElement.innerHTML=foodDetails;var foodImageLocation=foodElement.getAttribute("data-food-image-location");foodImageElement.src=foodImageLocation;var foodPrice=foodElement.getAttribute("data-food-price");foodPriceElement.innerHTML=foodPrice;var categoryName=foodElement.getAttribute("data-category-name");categoryNameElement.innerHTML=categoryName;var categoryDescription=foodElement.getAttribute("data-category-description");categoryDescriptionElement.innerHTML=categoryDescription;var restaurantName=foodElement.getAttribute("data-restaurant-name");restaurantHeaderLinkElement.innerHTML=restaurantName;var restaurantLink=foodElement.getAttribute("data-restaurant-link");restaurantHeaderLinkElement.href=restaurantLink;var foodIsLiked=foodElement.getAttribute("data-food-is-liked");var listItemNumber=foodElement.getAttribute("data-list-item-number");allInspectorView.setInterestIconBasedOnCurrentInterest(desktopInterestIcon,foodElement);}
return{interestIcon:desktopInterestIcon,initializeDesktopViewWithFood:initializeDesktopViewWithFood};})();var websiteHeader=(function(){var headerElement=document.querySelector("div.header");var hamburgerIcon=headerElement.querySelector("div.hamburger-icon-wrapper");var desktopSearchBar=headerElement.querySelector("form.header-search-bar-with-icon");var searchIcon=headerElement.querySelector("img.search-icon");return{headerContainer:headerElement,categoriesIcon:hamburgerIcon,headerSearchBar:desktopSearchBar,mobileSearchIcon:searchIcon};})();
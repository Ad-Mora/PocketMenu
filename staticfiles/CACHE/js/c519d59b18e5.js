var ajax=(function(){function getCSRFToken(){var csrfCookie=document.cookie.split(';')[0];var csrfTokenValue=csrfCookie.split('=')[1];return csrfTokenValue}
function send_ajax_request(destination_file,json_data,csrftoken,postAjaxFunction){var xmlhttp;if(window.XMLHttpRequest){xmlhttp=new XMLHttpRequest();}else{xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");}
xmlhttp.onreadystatechange=function(){if(xmlhttp.readyState==4&&xmlhttp.status==200){postAjaxFunction(xmlhttp.responseText);}};xmlhttp.open("POST",destination_file,true);xmlhttp.setRequestHeader("X-CSRFToken",csrftoken);xmlhttp.send(JSON.stringify(json_data));}
return{send_ajax_request:send_ajax_request,getCSRFToken:getCSRFToken};})();var documentModule=(function(){document.addEventListener('keydown',callKeypressFunctions);window.addEventListener('resize',callResizeFunctions);window.addEventListener('click',callClickFunctions);document.addEventListener('scroll',callScrollFunctions);var onKeyPressEvents=[];var onResizeEvents=[];var onClickEvents=[];var onScrollEvents=[];function callKeypressFunctions(event){for(var i=0;i<onKeyPressEvents.length;i++){(onKeyPressEvents[i])(event);}}
function callResizeFunctions(event){for(var i=0;i<onResizeEvents.length;i++){(onResizeEvents[i])(event);}}
function callClickFunctions(event){for(var i=0;i<onClickEvents.length;i++){(onClickEvents[i])(event);}}
function callScrollFunctions(event){for(var i=0;i<onScrollEvents.length;i++){(onScrollEvents[i])(event);}}
function addOnKeyPressFunction(func){onKeyPressEvents.push(func)}
function addOnResizeFunction(func){onResizeEvents.push(func)}
function addOnClickFunction(func){onClickEvents.push(func);}
function addOnScrollFunction(func){onScrollEvents.push(func);}
return{addOnKeyPressFunction:addOnKeyPressFunction,addOnResizeFunction:addOnResizeFunction,addOnClickFunction:addOnClickFunction,addOnScrollFunction:addOnScrollFunction};})();var websiteHeader=(function(){var headerElement=document.querySelector("div.header");var hamburgerIcon=headerElement.querySelector("div.hamburger-icon-wrapper");var desktopSearchBar=headerElement.querySelector("form.header-search-bar-with-icon");var searchIcon=headerElement.querySelector("img.search-icon");return{headerContainer:headerElement,categoriesIcon:hamburgerIcon,headerSearchBar:desktopSearchBar,mobileSearchIcon:searchIcon};})();var mobileSearchModal=(function(){var searchIcon=websiteHeader.mobileSearchIcon;var container=document.querySelector("div.mobile-modal-search-container");var backgroundOverlay=container.querySelector("div.mobile-search-background-overlay");var mainForm=container.querySelector("form.mobile-search-modal-form");var selectSearchType=container.querySelector("select.mobile-select-search-type");var searchBar=container.querySelector("input.mobile-modal-search-bar");var submitButton=container.querySelector("input.submit-mobile-search-modal");var cancelButton=container.querySelector("span.close-mobile-search-modal");var suggestionsList=container.querySelector("ul.mobile-search-suggestions-list");searchIcon.addEventListener('click',openSearchModal);cancelButton.addEventListener('click',closeSearchModal);searchBar.addEventListener('focus',displaySearchSuggestionsList);documentModule.addOnClickFunction(selectSuggestionsOrBlurEvent);searchBar.addEventListener('keyup',queryForSuggestions);selectSearchType.addEventListener('change',updateMainFormPOSTAddress);function updateMainFormPOSTAddress(event){if(this.value=="Food"||this.value=="Restaurant"){mainForm.action=event.currentTarget.getAttribute("data-regular-search-href");}
else{mainForm.action=event.currentTarget.getAttribute("data-internal-search-href");}}
function openSearchModal(event){container.style.display="block";searchBar.focus();}
function closeSearchModal(event){container.style.display="none";}
function displaySearchSuggestionsList(){suggestionsList.style.display="block";}
function selectSuggestionsOrBlurEvent(){var targetElement=event.target;if(targetElement.parentNode===suggestionsList){var suggestion_text=targetElement.innerHTML;searchBar.value=suggestion_text;mainForm.submit();}
else if(targetElement!==searchBar&&targetElement!==searchIcon){suggestionsList.style.display="none";}}
function queryForSuggestions(event){var searchType=selectSearchType.value;var searchQuery=searchBar.value;var csrfMiddlewareToken=ajax.getCSRFToken();var postAjaxFunction=function(result){suggestionsList.innerHTML=result;};var destinationFile=event.target.getAttribute("data-autocomplete-suggestions-href");var jsonData={"search-bar":searchQuery,"search-type":searchType};ajax.send_ajax_request(destinationFile,jsonData,csrfMiddlewareToken,postAjaxFunction);}
return{};})();var desktopHeaderSearch=(function(){var searchBarContainer=websiteHeader.headerSearchBar;var searchInput=searchBarContainer.querySelector("input.header-search-bar");var suggestionsList=searchBarContainer.querySelector("ul.header-search-suggestions-list");searchInput.addEventListener('focus',function(event){displaySearchSuggestionsList(event,suggestionsList);});documentModule.addOnClickFunction(function(event){selectSuggestionsOrBlurEvent(event,searchInput,searchBarContainer,suggestionsList);});searchInput.addEventListener('keyup',function(event){var destinationFile=event.target.getAttribute("data-autocomplete-suggestions-href");queryForSuggestions(event,searchInput,suggestionsList,destinationFile,'Restaurant');});function selectSuggestionsOrBlurEvent(event,searchInput,searchBarContainer,suggestionsList){var targetElement=event.target;if(targetElement.parentNode===suggestionsList){searchInput.value=targetElement.innerHTML;searchBarContainer.submit();}
else if(targetElement!==searchInput){suggestionsList.style.display="none";}}
function displaySearchSuggestionsList(event,suggestionsList){suggestionsList.style.display="block";}
function queryForSuggestions(event,searchInput,suggestionsList,destinationFile,searchType){var csrfMiddlewareToken=ajax.getCSRFToken();var json_data={"search-bar":searchInput.value,"search-type":searchType}
var postAjaxFunction=function(result){suggestionsList.innerHTML=result;}
ajax.send_ajax_request(destinationFile,json_data,csrfMiddlewareToken,postAjaxFunction);}
return{selectSuggestionsOrBlurEvent:selectSuggestionsOrBlurEvent,displaySearchSuggestionsList:displaySearchSuggestionsList,queryForSuggestions:queryForSuggestions};})();